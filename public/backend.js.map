{"version":3,"sources":["webpack:///webpack/bootstrap 7dae2652b1916ee15c28","webpack:///./src/server/server.js","webpack:///external \"express\"","webpack:///external \"mysql\"","webpack:///external \"body-parser\"","webpack:///external \"MD5\"","webpack:///./src/server/REST.js"],"names":[],"mappings":";;AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;ACtCA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA,sCAAqC,iBAAiB;AACtD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAO;AACP;;AAEA;AACA;AACA;AACA;;AAEA;;;;;;;ACpDA,qC;;;;;;ACAA,mC;;;;;;ACAA,yC;;;;;;ACAA,iC;;;;;;ACAA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,mBAAkB,4BAA4B;AAC9C,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,2BAA0B,0DAA0D;AACpF,cAAa;AACb,2BAA0B,uDAAuD;AACjF;AACA,UAAS;AACT,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,2BAA0B,0DAA0D;AACpF,cAAa;AACb,2BAA0B,uDAAuD;AACjF;AACA,UAAS;AACT,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,2BAA0B,0DAA0D;AACpF,cAAa;AACb,2BAA0B,4CAA4C;AACtE;AACA,UAAS;AACT,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,2BAA0B,0DAA0D;AACpF,cAAa;AACb,2BAA0B,8EAA8E;AACxG;AACA,UAAS;AACT,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,2BAA0B,0DAA0D;AACpF,cAAa;AACb,2BAA0B,6EAA6E;AACvG;AACA,UAAS;AACT,MAAK;AACL;;AAEA","file":"backend.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 7dae2652b1916ee15c28","var express = require(\"express\");\r\nvar mysql   = require(\"mysql\");\r\nvar bodyParser  = require(\"body-parser\");\r\nvar md5 = require('MD5');\r\nvar rest = require(\"./REST.js\");\r\nvar app  = express();\r\n\r\nfunction REST(){\r\n    var self = this;\r\n    self.connectMysql();\r\n};\r\n\r\nREST.prototype.connectMysql = function() {\r\n    var self = this;\r\n    var pool      =    mysql.createPool({\r\n        connectionLimit : 100,\r\n        host     : 'mysql.cc.puv.fi',\r\n        user     : 'e1300501',\r\n        password : '38ZWfz4EhBEw',\r\n        database : 'e1300501_inventory',\r\n        debug    :  false\r\n    });\r\n    pool.getConnection(function(err,connection){\r\n        if(err) {\r\n          self.stop(err);\r\n        } else {\r\n          self.configureExpress(connection);\r\n        }\r\n    });\r\n}\r\n\r\nREST.prototype.configureExpress = function(connection) {\r\n      var self = this;\r\n      app.use(bodyParser.urlencoded({ extended: true }));\r\n      app.use(bodyParser.json());\r\n      var router = express.Router();\r\n      app.use('/link', router);\r\n      var rest_router = new rest(router,connection,md5);\r\n      self.startServer();\r\n}\r\n\r\nREST.prototype.startServer = function() {\r\n      app.listen(3000,function(){\r\n          console.log(\"All right ! I am alive at Port 3000.\");\r\n      });\r\n}\r\n\r\nREST.prototype.stop = function(err) {\r\n    console.log(\"ISSUE WITH MYSQL \\n\" + err);\r\n    process.exit(1);\r\n}\r\n\r\nnew REST();\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/server/server.js\n// module id = 0\n// module chunks = 0","module.exports = require(\"express\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express\"\n// module id = 1\n// module chunks = 0","module.exports = require(\"mysql\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mysql\"\n// module id = 2\n// module chunks = 0","module.exports = require(\"body-parser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"body-parser\"\n// module id = 3\n// module chunks = 0","module.exports = require(\"MD5\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"MD5\"\n// module id = 4\n// module chunks = 0","var mysql   = require(\"mysql\");\r\n\r\nfunction REST_ROUTER(router,connection,md5) {\r\n    var self = this;\r\n    self.handleRoutes(router,connection,md5);\r\n}\r\n\r\nREST_ROUTER.prototype.handleRoutes = function(router,connection,md5) {\r\n    var self = this;\r\n    router.get(\"/\",function(req,res){\r\n        res.json({\"Message\" : \"Hello World !\"});\r\n    });\r\n\r\n    router.get(\"/users\",function(req,res){\r\n        var query = \"SELECT * FROM ??\";\r\n        var table = [\"user_login\"];\r\n        query = mysql.format(query,table);\r\n        connection.query(query,function(err,rows){\r\n            if(err) {\r\n                res.json({\"Error\" : true, \"Message\" : \"Error executing MySQL query\"});\r\n            } else {\r\n                res.json({\"Error\" : false, \"Message\" : \"Success\", \"Users\" : rows});\r\n            }\r\n        });\r\n    });\r\n\r\n    router.get(\"/users/:user_id\",function(req,res){\r\n        var query = \"SELECT * FROM ?? WHERE ??=?\";\r\n        var table = [\"user_login\",\"user_id\",req.params.user_id];\r\n        query = mysql.format(query,table);\r\n        connection.query(query,function(err,rows){\r\n            if(err) {\r\n                res.json({\"Error\" : true, \"Message\" : \"Error executing MySQL query\"});\r\n            } else {\r\n                res.json({\"Error\" : false, \"Message\" : \"Success\", \"Users\" : rows});\r\n            }\r\n        });\r\n    });\r\n\r\n    router.post(\"/users\",function(req,res){\r\n        var query = \"INSERT INTO ??(??,??) VALUES (?,?)\";\r\n        var table = [\"user_login\",\"user_email\",\"user_password\",req.body.email,md5(req.body.password)];\r\n        query = mysql.format(query,table);\r\n        connection.query(query,function(err,rows){\r\n            if(err) {\r\n                res.json({\"Error\" : true, \"Message\" : \"Error executing MySQL query\"});\r\n            } else {\r\n                res.json({\"Error\" : false, \"Message\" : \"User Added !\"});\r\n            }\r\n        });\r\n    });\r\n\r\n    router.put(\"/users\",function(req,res){\r\n        var query = \"UPDATE ?? SET ?? = ? WHERE ?? = ?\";\r\n        var table = [\"user_login\",\"user_password\",md5(req.body.password),\"user_email\",req.body.email];\r\n        query = mysql.format(query,table);\r\n        connection.query(query,function(err,rows){\r\n            if(err) {\r\n                res.json({\"Error\" : true, \"Message\" : \"Error executing MySQL query\"});\r\n            } else {\r\n                res.json({\"Error\" : false, \"Message\" : \"Updated the password for email \"+req.body.email});\r\n            }\r\n        });\r\n    });\r\n\r\n    router.delete(\"/users/:email\",function(req,res){\r\n        var query = \"DELETE from ?? WHERE ??=?\";\r\n        var table = [\"user_login\",\"user_email\",req.params.email];\r\n        query = mysql.format(query,table);\r\n        connection.query(query,function(err,rows){\r\n            if(err) {\r\n                res.json({\"Error\" : true, \"Message\" : \"Error executing MySQL query\"});\r\n            } else {\r\n                res.json({\"Error\" : false, \"Message\" : \"Deleted the user with email \"+req.params.email});\r\n            }\r\n        });\r\n    });\r\n}\r\n\r\nmodule.exports = REST_ROUTER;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/server/REST.js\n// module id = 5\n// module chunks = 0"],"sourceRoot":""}